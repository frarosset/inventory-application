<%_ const postUrl = locals.edit ? `/doughs/${data.id}/edit` : "/doughs/new" _%>
<form action=<%= postUrl %> method="POST">
  <%- include("formValidationErrors.ejs") _%>
  <fieldset>
    <%- include("input.ejs",{type: "text", name: "name", label: "Name", maxlength: process.env.NAME_MAX_LENGTH, required: true,  pattern: process.env.NAME_REGEX, title: process.env.NAME_REGEX_MSG}) _%>
    <%_ 
        const dd = process.env.INGREDIENT_PRICE_DECIMAL_DIGITS;
        const step = Number(`1e-${dd}`).toFixed(dd); ;
      _%>
    <%- include("input.ejs",{type: "number", name: "price", label: `Price [${process.env.CURRENCY}]`, min: 0, step, required: true}) _%>
    <%- include("input.ejs",{type: "number", name: "stock", label: "Stock", min: 0, step: 1, required: true}) _%>
    <%- include("textarea.ejs",{name: "notes", label: "Notes", maxlength: process.env.NOTES_MAX_LENGTH, pattern: process.env.NOTES_REGEX, title: process.env.NOTES_REGEX_MSG}) _%>
  </fieldset>
  <%- include("protectedFieldset.ejs") _%>
  <%- include("formActions.ejs", {fallbackUrl: "/doughs", label: locals.edit ? "UPDATE" : "CREATE"}) _%>
</form>
<%- include("multiStateCheckboxScript.ejs") _%>